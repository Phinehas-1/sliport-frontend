(()=>{"use strict";class e{constructor(){this.localStorage=window.localStorage,this.publishers_string=this.localStorage.getItem("publishers"),this.publishers=[],this.reports_string=this.localStorage.getItem("reports"),this.reports=[],this.localStorage.getItem("reports")||this.localStorage.setItem("reports",JSON.stringify(this.reports)),this.localStorage.getItem("publishers")||this.localStorage.setItem("publishers",JSON.stringify(this.publishers))}isConnected(){return!0}savePublisher(e){var t;return!!this.isConnected()&&(this.publishers=JSON.parse(null!==(t=this.publishers_string)&&void 0!==t?t:"[]"),this.publishers.push(e),this.localStorage.setItem("publishers",JSON.stringify(this.publishers)),!0)}getPublishers(){var e;return JSON.parse(null!==(e=this.publishers_string)&&void 0!==e?e:"[]")}saveReport(e){var t;return!!this.isConnected()&&(this.reports=JSON.parse(null!==(t=this.reports_string)&&void 0!==t?t:"[]"),console.log(this.reports),this.reports.push(e),this.localStorage.setItem("reports",JSON.stringify(this.reports)),!0)}getReports(){var e;return JSON.parse(null!==(e=this.reports_string)&&void 0!==e?e:"[]")}}class t{constructor(e){this.publisherName=e}getPublisherName(){return this.publisherName}}class r{constructor(e,t,r,s,o,i,n){this.monthOfReporting=e,this.publisherName=t,this.placement=r,this.videoShowing=s,this.hour=o,this.returnVisit=i,this.bibleStudy=n}getMonthOfReporting(){return this.monthOfReporting}getPublisherName(){return this.publisherName}getPlacement(){return this.placement}getVideoShowing(){return this.videoShowing}getHour(){return this.hour}getReturnVisit(){return this.returnVisit}getBibleStudy(){return this.bibleStudy}}class s{constructor(e){if(this.dataStore=e,!this.dataStore.isConnected)throw new Error("Could not connect to the data store.")}addPublisher(e){let r=new t(e["publisher-name"].value);return this.dataStore.savePublisher(r)}getPublishers(){return this.dataStore.getPublishers()}addReport(e){let t=new r(e["month-reporting"].value,e["publisher-name"].value,e.placement.value,e["video-showing"].value,e.hour.value,e["return-visit"].value,e["bible-study"].value);return this.dataStore.saveReport(t)}getReports(){return this.dataStore.getReports()}}class o{constructor(){this.reportForm=document.forms[0],this.totalsTable=document.getElementById("totals-table")}setUpReportFormView(e){const t=this.reportForm["publisher-name"];e.forEach((e=>{let r=document.createElement("OPTION"),s=document.createTextNode(e.publisherName);t.appendChild(r),r.appendChild(s)}))}setUpReportsTableView(e){const t=document.getElementById("totals-table");let r=document.createElement("TBODY"),s=document.createAttribute("id");s.value="totals-table-body",r.setAttributeNode(s),null==t||t.appendChild(r),e.forEach((e=>{let t=document.createElement("TR");r.appendChild(t);let s=1,o=Object.values(e);for(;s<o.length;){let e=document.createElement("TD"),r=document.createTextNode(o[s]);e.appendChild(r),t.appendChild(e),s++}}))}}const i=t=>{(e=>{"ASC"!==e.dataset.order?e.dataset.order="ASC":e.dataset.order="DESC"})(t);let r=document.getElementById("totals-table-body");if(null==r||r.remove(),"ASC"===t.dataset.order){let r=Object.values(new s(new e).getReports());return r.sort(((e,r)=>{switch(t.dataset.name){case"placement":return e.placement-r.placement;case"videoShowing":return e.videoShowing-r.videoShowing;case"hour":return e.hour-r.hour;case"returnVisit":return e.returnVisit-r.returnVisit;case"bibleStudy":return e.bibleStudy-r.bibleStudy}})),console.log(t.dataset.order),void(new o).setUpReportsTableView(r)}let i=Object.values(new s(new e).getReports());i.sort(((e,r)=>{switch(t.dataset.name){case"placement":return r.placement-e.placement;case"videoShowing":return r.videoShowing-e.videoShowing;case"hour":return r.hour-e.hour;case"returnVisit":return r.returnVisit-e.returnVisit;case"bibleStudy":return r.bibleStudy-e.bibleStudy}})),(new o).setUpReportsTableView(i)};var n,l,a,u,d;const h=[],c=new s(new e),p=new o,m=(e,t,r)=>{e.addEventListener(t,r),h.push(e)};m(document.forms[1],"submit",(e=>{e.preventDefault(),c.addPublisher(document.forms[1])?console.log(`Publisher : ${document.forms[1]["publisher-name"].value} was added.`):console.log("Could not save the publisher.")})),m(document.forms[0],"submit",(e=>{e.preventDefault(),c.addReport(document.forms[0])?console.log(`Report for : ${document.forms[0]["publisher-name"].value} was added.`):console.log("Could not save the report.")})),window.addEventListener("DOMContentLoaded",(()=>{p.setUpReportFormView(c.getPublishers()),p.setUpReportsTableView(c.getReports())})),null===(n=document.getElementById("placement_header"))||void 0===n||n.addEventListener("click",(e=>{i(e.target)})),null===(l=document.getElementById("video-showing_header"))||void 0===l||l.addEventListener("click",(e=>{i(e.target)})),null===(a=document.getElementById("hour_header"))||void 0===a||a.addEventListener("click",(e=>{i(e.target)})),null===(u=document.getElementById("return-visit_header"))||void 0===u||u.addEventListener("click",(e=>{i(e.target)})),null===(d=document.getElementById("bible-study_header"))||void 0===d||d.addEventListener("click",(e=>{i(e.target)}))})();